{% extends "experiences/base.html" %}

{#
  Vista de registro (signup)
  ==========================================
  - Hereda layout y estilos base desde base.html
  - Define un formulario de creación de usuario con estilos adaptados al tema oscuro
  - Incluye manejo de errores y textos de ayuda para guiar al usuario
#}

{% block content %}
  <style>
    /* ===== Estilos locales para signup ===== */

    /* Contenedor del formulario (centrado y con ancho controlado) */
    .auth-card {
      max-width: 520px;
      margin-inline: auto;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
      border-radius: 10px;
    }

    /* Etiquetas más marcadas para accesibilidad */
    .form-label {
      font-weight: 600;
      color: #212529;
    }

    /* Campos de formulario */
    input, select, textarea {
      background-color: #ffffff !important;
      color: #212529 !important;
      border: 1px solid #ced4da !important;
      border-radius: 6px !important;
      transition: all 0.2s ease-in-out;
    }

    input:focus, select:focus, textarea:focus {
      border-color: #0d6efd !important;
      box-shadow: 0 0 0 0.2rem rgba(13,110,253,0.25) !important;
      outline: 0;
    }

    /* Textos de ayuda */
    .helptext, .helptext ul, .helptext li {
      color: #6c757d !important;
      font-size: .85rem;
      margin-top: .25rem;
    }

    /* Errores */
    .errorlist {
      list-style: none;
      padding: 0;
      margin: .25rem 0 0;
      color: #dc3545;
      font-size: .9rem;
    }

    /* Botón */
    .btn-success {
      background-color: #198754;
      border: none;
      font-weight: 600;
      padding: 0.6rem;
    }

    .btn-success:hover {
      background-color: #157347;
    }
  </style>

  {# ===== Tarjeta principal del formulario ===== #}
  <div class="card auth-card">
    <div class="card-body p-4">
      <h1 class="h5 mb-4 text-center text-dark fw-bold">Crear cuenta</h1>

      {# Formulario de registro con protección CSRF #}
      <form method="post" novalidate>
        {% csrf_token %}

        {# ---- Campo email ---- #}
        <div class="mb-3">
          <label class="form-label" for="{{ form.email.id_for_label }}">Correo electrónico</label>
          {{ form.email }}
          {% if form.email.errors %}
            <ul class="errorlist">{{ form.email.errors }}</ul>
          {% endif %}
          {% if form.email.help_text %}
            <div class="helptext">{{ form.email.help_text|safe }}</div>
          {% endif %}
        </div>

        {# ---- Campo usuario ---- #}
        <div class="mb-3">
          <label class="form-label" for="{{ form.username.id_for_label }}">Nombre de Usuario</label>
          {{ form.username }}
          {% if form.username.errors %}
            <ul class="errorlist">{{ form.username.errors }}</ul>
          {% endif %}
          {% if form.username.help_text %}
            <div class="helptext">{{ form.username.help_text|safe }}</div>
          {% endif %}
        </div>

        {# ---- Campo contraseña ---- #}
        <div class="mb-3">
          <label class="form-label" for="{{ form.password1.id_for_label }}">Contraseña</label>
          {{ form.password1 }}
          {% if form.password1.errors %}
            <ul class="errorlist">{{ form.password1.errors }}</ul>
          {% endif %}
          {% if form.password1.help_text %}
            <div class="helptext">{{ form.password1.help_text|safe }}</div>
          {% endif %}
        </div>

        {# ---- Confirmación de contraseña ---- #}
        <div class="mb-4">
          <label class="form-label" for="{{ form.password2.id_for_label }}">Confirmar contraseña</label>
          {{ form.password2 }}
          {% if form.password2.errors %}
            <ul class="errorlist">{{ form.password2.errors }}</ul>
          {% endif %}
          {% if form.password2.help_text %}
            <div class="helptext">{{ form.password2.help_text|safe }}</div>
          {% endif %}
        </div>

        {# Botón principal para registrar #}
        <button class="btn btn-success w-100">Registrarme</button>
      </form>
    </div>
  </div>
{% endblock %}